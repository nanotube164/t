import{r as c,db as D,dc as z,dd as K,b9 as L,b8 as M,j as e,d9 as _,ci as A,W as g,I as d,d8 as V,o as x}from"./index-tKRtgB90.js";import{D as B,K as F,T as H}from"./kanban-task-eIYJF_Dq.js";import{I as k}from"./index-VAcXbeIy.js";var G=K?window:null,y=function(a){return!!a.addEventListener},T=function(a){return!!a.on},J=function(a,s,n,r){n===void 0&&(n=G),c.useEffect(function(){if(s&&n)return y(n)?D(n,a,s,r):T(n)&&n.on(a,s,r),function(){y(n)?z(n,a,s,r):T(n)&&n.off(a,s,r)}},[a,s,n,JSON.stringify(r)])};const W=J;function $({index:a,column:s,tasks:n,createTask:r,clearColumn:v,deleteColumn:N,renameColumn:C}){const{themeMode:I}=L(),w={height:"100%",padding:"16px",borderRadius:"16px",backgroundColor:I===M.Light?"rgb(244, 246, 248)":"rgba(145, 158, 171, 0.12)"},R=[{key:"1",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>{b(!0)},children:[e.jsx(d,{icon:"solar:pen-bold"}),e.jsx("span",{className:"ml-2",children:"rename"})]})},{key:"2",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>v(s.id),children:[e.jsx(d,{icon:"solar:eraser-bold"}),e.jsx("span",{className:"ml-2",children:"clear"})]})},{key:"3",label:e.jsxs("div",{className:"flex items-center text-warning",onClick:()=>N(s.id),children:[e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),e.jsx("span",{className:"ml-2",children:"delete"})]})}],[O,m]=c.useState(!1),u=c.useRef(null);W("click",i=>{var t,o,p,j;if(u.current&&!((t=u.current.input)!=null&&t.contains(i.target))){const l=(o=u.current.input)==null?void 0:o.value;l&&r(s.id,{id:x.string.uuid(),content:l,title:l,reporter:x.image.avatarGitHub(),priority:x.helpers.enumValue(H)}),m(!1)}if(f.current&&!((p=f.current.input)!=null&&p.contains(i.target))){const l=(j=f.current.input)==null?void 0:j.value;l&&C({...s,title:l}),b(!1)}});const[P,b]=c.useState(!1),f=c.useRef(null),[S,h]=c.useState(!1),E=i=>{h(!1),i.domEvent.stopPropagation()};return e.jsx(_,{draggableId:s.id,index:a,children:i=>e.jsx("div",{ref:i.innerRef,...i.draggableProps,children:e.jsxs("div",{style:w,children:[e.jsxs("header",{...i.dragHandleProps,className:"mb-4 flex select-none items-center justify-between text-base font-semibold",children:[P?e.jsx(k,{ref:f,size:"large",autoFocus:!0}):s.title,e.jsx(A,{open:S,onOpenChange:t=>h(t),menu:{items:R,onClick:E},placement:"bottomRight",trigger:["click"],children:e.jsx(g,{shape:"circle",type:"text",className:"!text-gray",children:e.jsx(d,{icon:"dashicons:ellipsis"})})})]}),e.jsx(V,{droppableId:s.id,type:B.TASK,children:t=>e.jsxs("main",{ref:t.innerRef,...t.droppableProps,className:"min-h-[10px]",children:[n.map((o,p)=>e.jsx(F,{task:o,index:p},o.id)),t.placeholder]})}),e.jsx("footer",{className:"w-[248px]",children:O?e.jsx(k,{ref:u,size:"large",placeholder:"Task Name",autoFocus:!0}):e.jsx(g,{onClick:t=>{t.stopPropagation(),m(!0)},type:"text",className:"!flex !w-full",block:"",size:"large",children:e.jsxs("div",{className:"flex items-center justify-center text-xs font-medium gap-1",children:[e.jsx(d,{icon:"carbon:add",size:20}),e.jsx("span",{children:"Add Task"})]})})})]})})})}const Y=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{$ as K,Y as k,W as u};
