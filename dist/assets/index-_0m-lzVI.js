import{r as t,q as se,X as ne,s as ae,t as B,a9 as oe,v as T,ap as ie,bd as le,aP as ce,aj as V,w as I,af as ge,aa as ue,$ as de}from"./index-tKRtgB90.js";import{P as me}from"./index-hPDjsNpv.js";const pe=t.createContext({}),G=pe,fe=e=>{const{antCls:n,componentCls:s,iconCls:r,avatarBg:i,avatarColor:z,containerSize:v,containerSizeLG:c,containerSizeSM:S,textFontSize:u,textFontSizeLG:x,textFontSizeSM:R,borderRadius:p,borderRadiusLG:f,borderRadiusSM:y,lineWidth:b,lineType:O,calc:$}=e,C=(d,E,g)=>({width:d,height:d,lineHeight:B($(d).sub($(b).mul(2)).equal()),borderRadius:"50%",[`&${s}-square`]:{borderRadius:g},[`${s}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${s}-icon`]:{fontSize:E,[`> ${r}`]:{margin:0}}});return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({},ae(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:z,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:i,border:`${B(b)} ${O} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),C(v,u,p)),{"&-lg":Object.assign({},C(c,x,f)),"&-sm":Object.assign({},C(S,R,y)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},he=e=>{const{componentCls:n,groupBorderColor:s,groupOverlapping:r,groupSpace:i}=e;return{[`${n}-group`]:{display:"inline-flex",[`${n}`]:{borderColor:s},"> *:not(:first-child)":{marginInlineStart:r}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:i}}}},ve=e=>{const{controlHeight:n,controlHeightLG:s,controlHeightSM:r,fontSize:i,fontSizeLG:z,fontSizeXL:v,fontSizeHeading3:c,marginXS:S,marginXXS:u,colorBorderBg:x}=e;return{containerSize:n,containerSizeLG:s,containerSizeSM:r,textFontSize:Math.round((z+v)/2),textFontSizeLG:c,textFontSizeSM:i,groupSpace:u,groupOverlapping:-S,groupBorderColor:x}},W=se("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:s}=e,r=ne(e,{avatarBg:s,avatarColor:n});return[fe(r),he(r)]},ve);var Se=function(e,n){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]]);return s};const Ce=(e,n)=>{const[s,r]=t.useState(1),[i,z]=t.useState(!1),[v,c]=t.useState(!0),S=t.useRef(null),u=t.useRef(null),x=oe(n,S),{getPrefixCls:R,avatar:p}=t.useContext(T),f=t.useContext(G),y=()=>{if(!u.current||!S.current)return;const o=u.current.offsetWidth,a=S.current.offsetWidth;if(o!==0&&a!==0){const{gap:m=4}=e;m*2<a&&r(a-m*2<o?(a-m*2)/o:1)}};t.useEffect(()=>{z(!0)},[]),t.useEffect(()=>{c(!0),r(1)},[e.src]),t.useEffect(y,[e.gap]);const b=()=>{const{onError:o}=e;(o==null?void 0:o())!==!1&&c(!1)},{prefixCls:O,shape:$,size:C,src:d,srcSet:E,icon:g,className:k,rootClassName:j,alt:N,draggable:q,children:A,crossOrigin:D}=e,w=Se(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),l=ie(o=>{var a,m;return(m=(a=C??(f==null?void 0:f.size))!==null&&a!==void 0?a:o)!==null&&m!==void 0?m:"default"}),J=Object.keys(typeof l=="object"?l||{}:{}).some(o=>["xs","sm","md","lg","xl","xxl"].includes(o)),M=le(J),K=t.useMemo(()=>{if(typeof l!="object")return{};const o=ce.find(m=>M[m]),a=l[o];return a?{width:a,height:a,lineHeight:`${a}px`,fontSize:a&&(g||A)?a/2:18}:{}},[M,l]),h=R("avatar",O),H=V(h),[Q,U,Y]=W(h,H),Z=I({[`${h}-lg`]:l==="large",[`${h}-sm`]:l==="small"}),L=t.isValidElement(d),ee=$||(f==null?void 0:f.shape)||"circle",te=I(h,Z,p==null?void 0:p.className,`${h}-${ee}`,{[`${h}-image`]:L||d&&v,[`${h}-icon`]:!!g},Y,H,k,j,U),re=typeof l=="number"?{width:l,height:l,lineHeight:`${l}px`,fontSize:g?l/2:18}:{};let P;if(typeof d=="string"&&v)P=t.createElement("img",{src:d,draggable:q,srcSet:E,onError:b,alt:N,crossOrigin:D});else if(L)P=d;else if(g)P=g;else if(i||s!==1){const o=`scale(${s}) translateX(-50%)`,a={msTransform:o,WebkitTransform:o,transform:o},m=typeof l=="number"?{lineHeight:`${l}px`}:{};P=t.createElement(ge,{onResize:y},t.createElement("span",{className:`${h}-string`,ref:u,style:Object.assign(Object.assign({},m),a)},A))}else P=t.createElement("span",{className:`${h}-string`,style:{opacity:0},ref:u},A);return delete w.onError,delete w.gap,Q(t.createElement("span",Object.assign({},w,{style:Object.assign(Object.assign(Object.assign(Object.assign({},re),K),p==null?void 0:p.style),w.style),className:te,ref:x}),P))},xe=t.forwardRef(Ce),_=xe,F=e=>{const{size:n,shape:s}=t.useContext(G),r=t.useMemo(()=>({size:e.size||n,shape:e.shape||s}),[e.size,e.shape,n,s]);return t.createElement(G.Provider,{value:r},e.children)},ye=e=>{const{getPrefixCls:n,direction:s}=t.useContext(T),{prefixCls:r,className:i,rootClassName:z,style:v,maxCount:c,maxStyle:S,size:u,shape:x,maxPopoverPlacement:R="top",maxPopoverTrigger:p="hover",children:f}=e,y=n("avatar",r),b=`${y}-group`,O=V(y),[$,C,d]=W(y,O),E=I(b,{[`${b}-rtl`]:s==="rtl"},d,O,i,z,C),g=ue(f).map((j,N)=>de(j,{key:`avatar-key-${N}`})),k=g.length;if(c&&c<k){const j=g.slice(0,c),N=g.slice(c,k);return j.push(t.createElement(me,{key:"avatar-popover-key",content:N,trigger:p,placement:R,overlayClassName:`${b}-popover`},t.createElement(_,{style:S},`+${k-c}`))),$(t.createElement(F,{shape:x,size:u},t.createElement("div",{className:E,style:v},j)))}return $(t.createElement(F,{shape:x,size:u},t.createElement("div",{className:E,style:v},g)))},be=ye,X=_;X.Group=be;const Oe=X;export{Oe as A};
